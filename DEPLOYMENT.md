# Deployment Guide - GitHub Pages (main/docs)

## âœ… Clean Structure Implemented

This repo now follows the **correct** pattern for deploying from `main` branch â†’ `/docs` folder.

### What Changed

#### 1. **docs/ is Now Pure Build Output**
- âœ… `docs/` contains ONLY files generated by `npm run build`
- âœ… No source code in `docs/`
- âœ… Vite generates: `index.html`, `assets/`, `images/`, `.nojekyll`, `CNAME`

#### 2. **No More node_modules or venv in Git**
- âœ… `node_modules` - Never committed (ignored)
- âœ… `venv` - Never committed (ignored)
- âœ… Clean `.gitignore` that properly excludes build artifacts

#### 3. **Removed Conflicting Workflow**
- âŒ Deleted `.github/workflows/deploy.yml` (was trying to deploy to gh-pages)
- âœ… Now using simple `main` / `docs` deployment (no CI needed)

#### 4. **Proper vite.config.js**
```js
export default defineConfig({
  plugins: [react()],
  base: '/',                    // âœ… Root path for custom domain
  build: {
    outDir: 'docs',             // âœ… Build to docs/
    emptyOutDir: true,          // âœ… Clean on each build
    sourcemap: false,
    assetsDir: 'assets'
  }
})
```

---

## ğŸ“ Final Clean Structure

```
unicornwaitlist/
â”œâ”€â”€ .github/                    # No workflows (using main/docs)
â”œâ”€â”€ public/                     # Static assets (copied to docs/)
â”‚   â”œâ”€â”€ .nojekyll
â”‚   â”œâ”€â”€ CNAME
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ vite.svg
â”œâ”€â”€ src/                        # Source code
â”‚   â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ App.jsx
â”‚   â”œâ”€â”€ index.css
â”‚   â””â”€â”€ main.jsx
â”œâ”€â”€ docs/                       # ğŸ”¥ PURE BUILD OUTPUT (auto-generated)
â”‚   â”œâ”€â”€ .nojekyll              # â† Copied from public/
â”‚   â”œâ”€â”€ CNAME                  # â† Copied from public/
â”‚   â”œâ”€â”€ assets/                # â† Generated by Vite
â”‚   â”‚   â”œâ”€â”€ index-[hash].js
â”‚   â”‚   â””â”€â”€ index-[hash].css
â”‚   â”œâ”€â”€ images/                # â† Vite copies from public/
â”‚   â”œâ”€â”€ index.html             # â† Generated by Vite
â”‚   â””â”€â”€ vite.svg               # â† Copied from public/
â”œâ”€â”€ index.html                  # Vite template (NOT served)
â”œâ”€â”€ vite.config.js
â”œâ”€â”€ package.json
â””â”€â”€ .gitignore

âŒ NO node_modules or venv folders in git
```

---

## ğŸš€ How to Deploy

### Local Build & Deploy
```bash
# 1. Build (generates clean docs/)
npm run build

# 2. Deploy (commits docs/ and pushes)
npm run deploy
```

### Manual Deploy
```bash
# Build
npm run build

# Commit only docs/
git add docs
git commit -m "Deploy: Update build"
git push origin main
```

---

## âš™ï¸ GitHub Pages Settings

**Required configuration** (check at: `github.com/princecharming001/ammalanding/settings/pages`):

1. **Source**: Deploy from a branch
2. **Branch**: `main` âœ…
3. **Folder**: `/docs` âœ… **IMPORTANT**
4. **Custom domain**: `amma.today`
5. **Enforce HTTPS**: Enabled

---

## ğŸ“ Important Scripts

```json
{
  "dev": "vite",                                  // Local development
  "build": "vite build && cp public/.nojekyll docs/.nojekyll && cp public/CNAME docs/CNAME",
  "preview": "vite preview",                      // Preview production build
  "deploy": "npm run build && git add docs && git commit -m 'Deploy: Update build' && git push origin main"
}
```

---

## âœ… What's Correct Now

1. âœ… **docs/ is pure build output** - Generated by Vite, not hand-edited
2. âœ… **No node_modules or venv** - Properly ignored
3. âœ… **Single deployment strategy** - main/docs (not gh-pages branch)
4. âœ… **Clean .gitignore** - Only commits what's needed
5. âœ… **Proper base path** - `/` for custom domain
6. âœ… **CNAME and .nojekyll in docs/** - Copied during build

---

## ğŸ” Verification

### Check Build Output
```bash
npm run build
ls -la docs/
```

Should see:
```
docs/
â”œâ”€â”€ .nojekyll       âœ…
â”œâ”€â”€ CNAME           âœ…
â”œâ”€â”€ assets/         âœ…
â”œâ”€â”€ images/         âœ…
â”œâ”€â”€ index.html      âœ…
â””â”€â”€ vite.svg        âœ…
```

### Check Git Status
```bash
git status
```

Should show:
- âœ… `docs/` tracked (contains build)
- âŒ `node_modules` NOT tracked
- âŒ `venv` NOT tracked

---

## ğŸ¯ Live Site

- **Custom Domain**: https://amma.today
- **GitHub Pages**: https://princecharming001.github.io/ammalanding/

Both should work (redirect to amma.today).

---

## ğŸ†˜ Troubleshooting

### Blank Page
1. Check base path in `vite.config.js` (should be `/`)
2. Hard refresh: `Cmd+Shift+R` (Mac) or `Ctrl+Shift+R` (Windows)
3. Wait 2-3 minutes for GitHub Pages to rebuild

### 404 Errors
1. Verify GitHub Pages is set to `main` / `docs`
2. Check that `docs/` exists and has `index.html`
3. Ensure CNAME points to correct domain

### Build Fails
```bash
# Clean install
rm -rf node_modules package-lock.json
npm install
npm run build
```

---

## ğŸ“š Key Takeaways

1. **docs/ = Build Output ONLY** (never edit manually)
2. **One Strategy** (main/docs, not gh-pages branch)
3. **Keep it Clean** (no node_modules, venv, or build artifacts in git)
4. **Let Vite Work** (it handles everything in the build)

This is now a **production-ready** deployment setup! ğŸ‰

